<br>
<div class="mx-3">
  <h2>Verf√ºgbare Mail-Vorlagen</h2>
  <mat-card class="p-2 max-h-[30vh] overflow-y-auto">
    <div class="max-sm:hidden grid md:grid-cols-5">
      <div class="col-span-2"><p><strong>Vorlagenbezeichnung</strong></p></div>
      <div class="col-span-2"><p><strong>Mailbetreff</strong></p></div>
    </div>
    <mat-divider></mat-divider>
    <div *ngFor="let template of availableMailTemplates">
      <div *ngIf="!isUsed(template.id)" class="grid grid-cols-1 md:grid-cols-5">
        <div class="md:col-span-2 pt-3"><p>{{template.name}}</p></div>
        <div class="md:col-span-2 md:pt-3"><p>{{template.subject}}</p></div>
        <div class="justify-self-end flex">
          <div *ngIf="!isUsed(template.id)">
            <button mat-icon-button color="primary" [disabled]="editMode" (click)="addToUsed(template)">
              <mat-icon matTooltip="Verwenden">add</mat-icon>
            </button>
          </div>
        </div>
      </div>
      <mat-divider></mat-divider>
    </div>
  </mat-card>
  <br>
  <h2>Verwendete Mail-Vorlagen</h2>
  <mat-card class="p-2 max-h-[45vh] overflow-y-auto">
    <div class="max-sm:hidden grid md:grid-cols-2">
      <div><p><strong>Vorlagenbezeichnung</strong></p></div>
      <div><p><strong>Versandzeitpunkt</strong></p></div>
    </div>
    <mat-divider></mat-divider>
    <div *ngFor="let template of usedMailTemplates">
      <div class="grid grid-cols-1 md:grid-cols-2">
        <div><p class="pt-3">{{template.templateName}}</p></div>
        <div class="justify-self-end flex">
          <div class="mr-5"><p class="pt-3">{{template.triggerTime}}</p></div>
          <div class="flex">
            <div *ngIf="!editMode || editedId!=template.templateId"><button mat-icon-button color="primary" class="mr-5" [disabled]="editMode" (click)="edit(template.templateId)">
              <mat-icon matTooltip="Bearbeiten">edit</mat-icon>
            </button></div>
            <div *ngIf="editMode && editedId==template.templateId"><button mat-icon-button color="primary" class="mr-5" (click)="saveRule()">
              <mat-icon matTooltip="Speichern">save</mat-icon>
            </button></div>
            <button mat-icon-button color="warn" [disabled]="editMode">
              <mat-icon matTooltip="Entfernen">delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </mat-card>
</div>

